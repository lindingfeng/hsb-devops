#!/usr/bin/env node
'use strict';

const { version } = require('../package.json')
const program = require('commander');
const shell = require('shelljs');
const { execCommand } = require('../lib/exec')

const installHsbVuePackage = async (cli, projectName) => {
  const res = await execCommand('npm i -g git+http://gitlab.huishoubao.com/web_team/public/hsb_vue.git --registry=https://registry.npm.taobao.org')
  console.log(res)
  CreateHsbVueProject(cli, projectName)
}

const CreateHsbVueProject = async (cli, projectName) => {
  const res = await execCommand(`hsbvue create ${projectName}`)
  console.log(res)
}

program
  .version(version)
  .command('create <cli> <projectName>')
  .option('-s, --small', 'small pizza size')
  .option('-p, --pizza-type <type>', 'flavour of pizza')
  .action((cli, projectName) => {
    // installHsbVuePackage(cli, projectName)
    // execCommand('node -v')
    // execCommand('npm -v')
    shell.exec('npm i -g git+http://gitlab.huishoubao.com/web_team/public/hsb_vue.git --registry=https://registry.npm.taobao.org')
    shell.exec(`hsbvue create ${projectName}`)
  });

program
  .parse(process.argv);

// require('../index.js').run()